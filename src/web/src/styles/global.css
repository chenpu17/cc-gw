@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light dark;
  /* Enhanced color palette */
  --color-primary-50: 239 246 255;
  --color-primary-100: 219 234 254;
  --color-primary-200: 191 219 254;
  --color-primary-300: 147 197 253;
  --color-primary-400: 96 165 250;
  --color-primary-500: 59 130 246;
  --color-primary-600: 37 99 235;
  --color-primary-700: 29 78 216;
  --color-primary-800: 30 64 175;
  --color-primary-900: 30 58 138;
  --color-primary-950: 23 37 84;

  /* Glass effect variables */
  --glass-bg: rgba(255, 255, 255, 0.8);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-shadow: rgba(0, 0, 0, 0.1);
}

:root,
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  min-height: 100%;
}

[data-theme="dark"] {
  --glass-bg: rgba(15, 23, 42, 0.8);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-shadow: rgba(0, 0, 0, 0.3);
}

html,
body,
#root {
  height: 100%;
  width: 100%;
  overflow-x: hidden;
  max-width: 100vw;
  position: relative;
}

body {
  @apply min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 text-slate-900 subpixel-antialiased dark:bg-slate-950 dark:text-slate-50;
  background-image:
    radial-gradient(circle at 25% 15%, rgba(59, 130, 246, 0.08), transparent 50%),
    radial-gradient(circle at 75% 10%, rgba(139, 92, 246, 0.06), transparent 45%),
    radial-gradient(circle at 50% 80%, rgba(236, 72, 153, 0.04), transparent 35%);
  background-attachment: fixed;
  background-size: 100% 100%, 80% 80%, 60% 60%;
  background-color: #f8fafc;
  /* 优化字体渲染和适配高分辨率屏幕 */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  /* 改善在不同分辨率下的显示 */
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: -1;
  background-image:
    radial-gradient(rgba(148, 163, 184, 0.06) 1px, transparent 1px),
    linear-gradient(90deg, rgba(148, 163, 184, 0.03) 1px, transparent 1px);
  background-size: 32px 32px, 32px 32px;
  opacity: 0.8;
  pointer-events: none;
}

@media (prefers-color-scheme: dark) {
  body {
    background-image:
      radial-gradient(circle at 25% 15%, rgba(59, 130, 246, 0.12), transparent 50%),
      radial-gradient(circle at 75% 10%, rgba(139, 92, 246, 0.10), transparent 45%),
      radial-gradient(circle at 50% 80%, rgba(236, 72, 153, 0.06), transparent 35%);
    background-color: #020617;
  }

  body::before {
    background-image:
      radial-gradient(rgba(148, 163, 184, 0.04) 1px, transparent 1px),
      linear-gradient(90deg, rgba(148, 163, 184, 0.02) 1px, transparent 1px);
    opacity: 0.4;
  }
}


input[type='text'],
input[type='number'],
input[type='search'],
input[type='email'],
input[type='url'],
input[type='date'],
input[type='time'],
input[type='datetime-local'],
input[type='password'],
select,
textarea {
  @apply rounded-2xl border border-slate-200/50 bg-white/90 px-4 py-3 text-sm text-slate-800 shadow-sm shadow-slate-200/30 transition-all duration-200 focus:border-blue-400/70 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-400/20 focus:shadow-md focus:shadow-blue-200/40 dark:border-slate-700/50 dark:bg-slate-900/90 dark:text-slate-200 dark:shadow-lg dark:shadow-slate-900/30 dark:focus:border-blue-400/70 dark:focus:ring-blue-400/20;
}

/* Enhanced scrollbar styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-slate-100/50 dark:bg-slate-800/50;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  @apply bg-slate-300/70 dark:bg-slate-600/70;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-400/80 dark:bg-slate-500/80;
}

/* Focus styles for better accessibility */
*:focus-visible {
  @apply outline-none ring-2 ring-blue-500/50 ring-offset-2 ring-offset-white dark:ring-offset-slate-950;
}

/* Loading spinner */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

/* Gradient text */
.gradient-text {
  @apply bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent dark:from-blue-400 dark:to-purple-400;
}

/* Glass morphism utility */
.glass {
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: 0 8px 32px var(--glass-shadow);
}

/* 简化hover效果，避免transform导致的缩放 */
.hover-lift {
  @apply transition-shadow duration-300 ease-out;
}

.hover-lift:hover {
  @apply shadow-xl;
}

/* Smooth transitions for theme switching */
* {
  @apply transition-colors duration-200;
}

/* Custom selection colors */
::selection {
  @apply bg-blue-500/20 text-blue-900 dark:text-blue-100;
}

/* 移除响应式字体大小调整，避免页面缩放问题 */

/* 高分辨率屏幕优化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .fine-detail {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {
  .hover-lift:hover {
    transform: none;
  }

  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* 确保表格滚动正常工作 */
.table-container {
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  /* Safari 特定修复 */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Safari 滚动修复 */
@supports (-webkit-appearance: none) {
  .table-container {
    -webkit-overflow-scrolling: auto;
    scrollbar-width: auto;
  }
}

/* 强制显示 Safari 滚动条 */
.table-container::-webkit-scrollbar {
  height: 12px !important;
  width: 12px !important;
  display: block !important;
}

.table-container::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

.table-container::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

.table-container::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

@media (prefers-color-scheme: dark) {
  .table-container::-webkit-scrollbar-track {
    background: #1e293b;
  }

  .table-container::-webkit-scrollbar-thumb {
    background: #475569;
  }

  .table-container::-webkit-scrollbar-thumb:hover {
    background: #64748b;
  }
}

/* 简化GPU加速，避免缩放问题 */
.gpu-accelerated {
  will-change: opacity;
}

/* 自适应容器 */
.responsive-container {
  width: 100%;
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 1rem;
}

@media (min-width: 640px) {
  .responsive-container {
    padding: 0 2rem;
  }
}

@media (min-width: 1921px) {
  .responsive-container {
    max-width: 1800px;
    padding: 0 3rem;
  }
}
